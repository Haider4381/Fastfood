<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>FastFood POS ‚Äî Deliveries</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <header class="topbar">
    <div class="brand-inline">
      <div class="logo small" aria-hidden="true">üçî</div>
      <strong>Deliveries</strong>
    </div>
    <div class="topbar-actions">
      <a class="btn" href="dashboard.html">‚Üê Back</a>
      <button id="logoutBtn" class="btn danger">Logout</button>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2 class="card-title">Find or Create Delivery Order</h2>
      <div class="toolbar">
        <label class="muted small">Order ID</label>
        <input type="number" id="orderId" class="w-140" placeholder="e.g., 101">
        <button id="btnLoadOrder" class="btn">Load</button>

        <span class="pill">Create new</span>
        <label class="muted small">Branch</label>
        <input type="number" id="branchId" value="1" min="1" step="1" class="w-100px">
        <label class="muted small">Customer Phone (optional)</label>
        <input type="text" id="custPhone" placeholder="03xxxxxxxxx" class="w-180">
        <button id="btnCreateDeliveryOrder" class="btn primary">Create Delivery Order</button>

        <span id="topMsg" class="muted small"></span>
      </div>
    </section>

    <section class="two-col">
      <!-- Left: Delivery form -->
      <div class="card">
        <h3 class="card-title">Delivery Details</h3>
        <form id="delForm" class="form">
          <div class="form-row">
            <label>Order ID</label>
            <input type="text" id="fOrderId" readonly>
          </div>
          <div class="form-row">
            <label>Customer Name</label>
            <input type="text" id="customerName" placeholder="Customer name">
          </div>
          <div class="form-row">
            <label>Customer Phone</label>
            <input type="text" id="customerPhone" placeholder="03xxxxxxxxx">
          </div>
          <div class="form-row">
            <label>Address Line 1</label>
            <input type="text" id="address1" placeholder="House / Street">
          </div>
          <div class="form-row">
            <label>Address Line 2</label>
            <input type="text" id="address2" placeholder="(optional)">
          </div>
          <div class="form-row">
            <label>Area</label>
            <input type="text" id="area" placeholder="Area / Sector">
          </div>
          <div class="form-row">
            <label>City</label>
            <input type="text" id="city" placeholder="City">
          </div>
          <div class="form-row">
            <label>Delivery Fee</label>
            <input type="number" step="0.01" id="deliveryFee" placeholder="0.00">
          </div>
          <div class="form-row">
            <label>Rider Name</label>
            <input type="text" id="riderName" placeholder="Rider name">
          </div>
          <div class="form-row">
            <label>Rider Phone</label>
            <input type="text" id="riderPhone" placeholder="03xxxxxxxxx">
          </div>
          <div class="form-row">
            <label>Status</label>
            <select id="status">
              <option value="">‚Äî</option>
              <option value="NEW">NEW</option>
              <option value="ASSIGNED">ASSIGNED</option>
              <option value="OUT_FOR_DELIVERY">OUT_FOR_DELIVERY</option>
              <option value="DELIVERED">DELIVERED</option>
              <option value="CANCELLED">CANCELLED</option>
            </select>
          </div>
          <div class="form-row">
            <label>Notes</label>
            <input type="text" id="notes" placeholder="Landmark, door code, etc.">
          </div>

          <div class="toolbar">
            <button id="btnSave" type="submit" class="btn primary">Save Delivery</button>
            <button id="btnAssign" type="button" class="btn">Assign</button>
            <button id="btnOut" type="button" class="btn">Out for Delivery</button>
            <button id="btnDelivered" type="button" class="btn">Mark Delivered</button>
            <button id="btnCancelled" type="button" class="btn danger">Cancel</button>
            <span id="formMsg" class="muted small"></span>
          </div>
        </form>
      </div>

      <!-- Right: Order summary + recent -->
      <div class="card">
        <h3 class="card-title">Order Summary</h3>
        <div class="toolbar">
          <span class="muted small">Order No:</span>
          <span id="orderNo" class="pill mono">‚Äî</span>
          <span class="muted small">Status:</span>
          <span id="orderStatus" class="pill">‚Äî</span>
          <span class="muted small">Grand Total:</span>
          <span id="orderGrand" class="pill mono">0.00</span>
        </div>
        <div class="table-wrap mt-8">
          <table class="table">
            <thead>
              <tr><th>#</th><th>Item</th><th class="num">Qty</th><th class="num">Price</th><th class="num">Total</th></tr>
            </thead>
            <tbody id="itemsBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <section class="card mt-14">
      <div class="toolbar">
        <h3 class="card-title">Recent Delivery Orders</h3>
        <div class="actions">
          <button id="btnReloadRecent" class="btn">Reload</button>
        </div>
      </div>
      <div id="recentMsg" class="muted small">Loading...</div>
      <div class="table-wrap mt-8">
        <table class="table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Order No</th>
              <th>Status</th>
              <th>Customer</th>
              <th>Area</th>
              <th>Fee</th>
              <th>Created</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="recentBody"></tbody>
        </table>
      </div>
    </section>
  </main>

  <div id="toast" class="toast" hidden></div>

  <script src="app.js"></script>
  <script src="deliveries.js"></script>
</body>
</html>